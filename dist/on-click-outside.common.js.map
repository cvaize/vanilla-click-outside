{"version":3,"file":"on-click-outside.common.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["export function isNodeList(s: any): boolean {\n  return NodeList.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLCollection(s: any): boolean {\n  return HTMLCollection.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLElement(s: any): boolean {\n  return HTMLElement.prototype.isPrototypeOf(s)\n}\n","import { isNodeList, isHTMLCollection, isHTMLElement } from './utils'\n\nexport type OCOSelector = HTMLElement | HTMLCollection | NodeList\nexport type OCOOptions = {\n  removeListener: boolean\n}\nexport type OCOCallback = (t: EventTarget | number) => {}\n\nconst defaultOptions: OCOOptions = {\n  removeListener: true,\n}\n\n/**\n * A simple easy to script to determine whenever the user clicks outside a selected element.\n *\n * @param {OCOSelector} selector Element to exclude\n * @param {OCOCallback} callback Do something on click outside\n */\nexport default function OnClickOutside(\n  selector: OCOSelector,\n  options: OCOOptions,\n  callback: OCOCallback\n): EventListener {\n  const newOptions = { ...defaultOptions, ...options }\n\n  const listener = (event: Event) => {\n    if (isNodeList(selector) || isHTMLCollection(selector)) {\n      if (\n        Array.from(<HTMLCollection | NodeList>selector) // prettier-ignore\n          .some(s => s.contains(<Node>event.target))\n      ) {\n        return callback(1) // HTMLCollection | NodeList\n      }\n    } else if (isHTMLElement(selector)) {\n      if ((selector as HTMLElement).contains(<Node>event.target)) {\n        return callback(2) // HTMLElement\n      }\n    } else {\n      console.warn('Undefined type of', selector)\n      return callback(3) // Undefined\n    }\n\n    if (newOptions.removeListener) {\n      document.removeEventListener('click', listener)\n    }\n    return callback(event.target || 0)\n  }\n\n  document.addEventListener('click', listener)\n  return listener // allow deleting from outside\n}\n"],"names":["isNodeList","s","NodeList","prototype","isPrototypeOf","isHTMLCollection","HTMLCollection","isHTMLElement","HTMLElement","defaultOptions","removeListener","OnClickOutside","selector","options","callback","newOptions","listener","event","Array","from","some","contains","target","console","warn","document","removeEventListener","addEventListener"],"mappings":";;;;;;;;;sBAAgBA,WAAWC,GACzB,OAAOC,SAASC,UAAUC,cAAcH,YAG1BI,iBAAiBJ,GAC/B,OAAOK,eAAeH,UAAUC,cAAcH,YAGhCM,cAAcN,GAC5B,OAAOO,YAAYL,UAAUC,cAAcH,GCD7C,MAAMQ,eAA6B,CACjCC,gBAAgB,GASlB,SAAwBC,eACtBC,EACAC,EACAC,GAEA,MAAMC,mBAAkBN,eAAmBI,GAErCG,EAAYC,IAChB,GAAIjB,WAAWY,IAAaP,iBAAiBO,IAC3C,GACEM,MAAMC,KAAgCP,GACnCQ,KAAKnB,GAAKA,EAAEoB,SAAeJ,EAAMK,SAEpC,OAAOR,EAAS,OAEb,CAAA,IAAIP,cAAcK,GAMvB,OADAW,QAAQC,KAAK,oBAAqBZ,GAC3BE,EAAS,GALhB,GAAKF,EAAyBS,SAAeJ,EAAMK,QACjD,OAAOR,EAAS,GAUpB,OAHIC,EAAWL,gBACbe,SAASC,oBAAoB,QAASV,GAEjCF,EAASG,EAAMK,QAAU,IAIlC,OADAG,SAASE,iBAAiB,QAASX,GAC5BA"}