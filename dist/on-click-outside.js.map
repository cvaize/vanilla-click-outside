{"version":3,"file":"on-click-outside.js","sources":["../src/index.ts","../src/utils.ts"],"sourcesContent":["import { isNodeList, isHTMLCollection, isHTMLElement } from './utils'\n\nexport type OCOSelector = HTMLElement | HTMLCollection | NodeList\nexport type OCOOptions = {\n  removeListener: boolean\n}\nexport type OCOCallback = (t: EventTarget | number) => {}\n\nconst defaultOptions: OCOOptions = {\n  removeListener: true,\n}\n\n/**\n * A simple easy to script to determine whenever the user clicks outside a selected element.\n *\n * @param {OCOSelector} selector Element to exclude\n * @param {OCOCallback} callback Do something on click outside\n */\nexport default function OnClickOutside(\n  selector: OCOSelector,\n  options: OCOOptions,\n  callback: OCOCallback\n): EventListener {\n  const newOptions = { ...defaultOptions, ...options }\n\n  const listener = (event: Event) => {\n    if (isNodeList(selector) || isHTMLCollection(selector)) {\n      if (\n        Array.from(<HTMLCollection | NodeList>selector) // prettier-ignore\n          .some(s => s.contains(<Node>event.target))\n      ) {\n        return callback(1) // HTMLCollection | NodeList\n      }\n    } else if (isHTMLElement(selector)) {\n      if ((selector as HTMLElement).contains(<Node>event.target)) {\n        return callback(2) // HTMLElement\n      }\n    } else {\n      console.warn('Undefined type of', selector)\n      return callback(3) // Undefined\n    }\n\n    if (newOptions.removeListener) {\n      document.removeEventListener('click', listener)\n    }\n    return callback(event.target || 0)\n  }\n\n  document.addEventListener('click', listener)\n  return listener // allow deleting from outside\n}\n","export function isNodeList(s: any): boolean {\n  return NodeList.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLCollection(s: any): boolean {\n  return HTMLCollection.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLElement(s: any): boolean {\n  return HTMLElement.prototype.isPrototypeOf(s)\n}\n"],"names":["defaultOptions","removeListener","selector","options","callback","newOptions","listener","event","s","NodeList","prototype","isPrototypeOf","isNodeList","HTMLCollection","isHTMLCollection","Array","from","some","contains","target","HTMLElement","isHTMLElement","console","warn","document","removeEventListener","addEventListener"],"mappings":";;;;;;;;;oMAQA,MAAMA,EAA6B,CACjCC,gBAAgB,mBAUhBC,EACAC,EACAC,GAEA,MAAMC,mBAAkBL,EAAmBG,GAErCG,EAAYC,IAChB,YC1BuBC,GACzB,OAAOC,SAASC,UAAUC,cAAcH,GDyBlCI,CAAWV,aCtBcM,GAC/B,OAAOK,eAAeH,UAAUC,cAAcH,GDqBhBM,CAAiBZ,IAC3C,GACEa,MAAMC,KAAgCd,GACnCe,KAAKT,GAAKA,EAAEU,SAAeX,EAAMY,SAEpC,OAAOf,EAAS,OAEb,CAAA,aCzBmBI,GAC5B,OAAOY,YAAYV,UAAUC,cAAcH,GDwB9Ba,CAAcnB,GAMvB,OADAoB,QAAQC,KAAK,oBAAqBrB,GAC3BE,EAAS,GALhB,GAAKF,EAAyBgB,SAAeX,EAAMY,QACjD,OAAOf,EAAS,GAUpB,OAHIC,EAAWJ,gBACbuB,SAASC,oBAAoB,QAASnB,GAEjCF,EAASG,EAAMY,QAAU,IAIlC,OADAK,SAASE,iBAAiB,QAASpB,GAC5BA"}