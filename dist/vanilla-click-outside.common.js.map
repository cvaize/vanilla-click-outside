{"version":3,"file":"vanilla-click-outside.common.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["export function isNodeList(s: any): boolean {\n  return NodeList.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLCollection(s: any): boolean {\n  return HTMLCollection.prototype.isPrototypeOf(s)\n}\n\nexport function isHTMLElement(s: any): boolean {\n  return HTMLElement.prototype.isPrototypeOf(s)\n}\n","import { isNodeList, isHTMLCollection, isHTMLElement } from './utils'\n\nexport type OCOSelector = HTMLElement | HTMLCollection | NodeList\nexport type OCOOptions = {\n  removeListener: boolean\n  verbose: boolean\n}\nexport type OCOCallback = (t: EventTarget | boolean | string | null) => {}\n\nconst defaultOptions: OCOOptions = {\n  removeListener: true,\n  verbose: false,\n}\n\n/**\n * A simple easy to script to determine whenever the user clicks outside a selected element.\n *\n * @param {OCOSelector} selector Element to exclude\n * @param {OCOCallback} callback Do something on click outside\n */\nexport default function VanillaClickOutside(\n  selector: OCOSelector,\n  options: OCOOptions,\n  callback: OCOCallback\n): EventListener {\n  const newOptions = { ...defaultOptions, ...options }\n\n  const listener = (event: Event) => {\n    if (isNodeList(selector) || isHTMLCollection(selector)) {\n      if (\n        Array.from(<HTMLCollection | NodeList>selector) // prettier-ignore\n          .some(s => s.contains(<Node>event.target))\n      ) {\n        if (newOptions.verbose) {\n          return callback('HTMLCollection | NodeList')\n        }\n        return\n      }\n    } else if (isHTMLElement(selector)) {\n      if ((selector as HTMLElement).contains(<Node>event.target)) {\n        if (newOptions.verbose) {\n          return callback('HTMLElement')\n        }\n        return\n      }\n    } else {\n      console.warn('Undefined type of', selector)\n      if (newOptions.verbose) {\n        return callback(null)\n      }\n      return\n    }\n\n    if (newOptions.removeListener) {\n      document.removeEventListener('click', listener)\n    }\n    if (newOptions.verbose) {\n      return callback(event.target)\n    }\n    return callback(true)\n  }\n\n  document.addEventListener('click', listener)\n  return listener // allow deleting from outside\n}\n"],"names":["isNodeList","s","NodeList","prototype","isPrototypeOf","isHTMLCollection","HTMLCollection","isHTMLElement","HTMLElement","defaultOptions","removeListener","verbose","VanillaClickOutside","selector","options","callback","newOptions","listener","event","Array","from","some","contains","target","console","warn","document","removeEventListener","addEventListener"],"mappings":";;;;;;;;;sBAAgBA,WAAWC,GACzB,OAAOC,SAASC,UAAUC,cAAcH,YAG1BI,iBAAiBJ,GAC/B,OAAOK,eAAeH,UAAUC,cAAcH,YAGhCM,cAAcN,GAC5B,OAAOO,YAAYL,UAAUC,cAAcH,GCA7C,MAAMQ,eAA6B,CACjCC,gBAAgB,EAChBC,SAAS,GASX,SAAwBC,oBACtBC,EACAC,EACAC,GAEA,MAAMC,mBAAkBP,eAAmBK,GAErCG,EAAYC,IAChB,GAAIlB,WAAWa,IAAaR,iBAAiBQ,IAC3C,GACEM,MAAMC,KAAgCP,GACnCQ,KAAKpB,GAAKA,EAAEqB,SAAeJ,EAAMK,SAEpC,OAAIP,EAAWL,QACNI,EAAS,kCAElB,MAEG,CAAA,IAAIR,cAAcM,GASvB,OADAW,QAAQC,KAAK,oBAAqBZ,GAC9BG,EAAWL,QACNI,EAAS,WAElB,EAXA,GAAKF,EAAyBS,SAAeJ,EAAMK,QACjD,OAAIP,EAAWL,QACNI,EAAS,oBAElB,EAaJ,OAHIC,EAAWN,gBACbgB,SAASC,oBAAoB,QAASV,GAEpCD,EAAWL,QACNI,EAASG,EAAMK,QAEjBR,GAAS,IAIlB,OADAW,SAASE,iBAAiB,QAASX,GAC5BA"}